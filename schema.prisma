// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id        String    @id @default(cuid())
  name      String    @default("")
  email     String    @unique @default("")
  password  String?
  createdAt DateTime? @default(now())
  seller    Seller?   @relation("Seller_user")
}

model Category {
  id            String        @id @default(cuid())
  name          String        @default("")
  subcategories Subcategory[] @relation("Subcategory_category")
  ads           Ad[]          @relation("Ad_category")
}

model Subcategory {
  id         String    @id @default(cuid())
  name       String    @default("")
  category   Category? @relation("Subcategory_category", fields: [categoryId], references: [id])
  categoryId String?   @map("category")
  ads        Ad[]      @relation("Ad_subcategory")

  @@index([categoryId])
}

model Ad {
  id                 String       @id @default(cuid())
  createdAt          DateTime?    @default(now())
  title              String       @default("")
  description        String       @default("")
  price              String       @default("")
  coverImg_filesize  Int?
  coverImg_extension String?
  coverImg_width     Int?
  coverImg_height    Int?
  coverImg_id        String?
  views              Int?         @default(0)
  extraData          String?      @default("{}")
  address            String       @default("")
  seller             Seller?      @relation("Ad_seller", fields: [sellerId], references: [id])
  sellerId           String?      @map("seller")
  images             Image[]      @relation("Image_ad")
  category           Category?    @relation("Ad_category", fields: [categoryId], references: [id])
  categoryId         String?      @map("category")
  subcategory        Subcategory? @relation("Ad_subcategory", fields: [subcategoryId], references: [id])
  subcategoryId      String?      @map("subcategory")

  @@index([sellerId])
  @@index([categoryId])
  @@index([subcategoryId])
}

model Seller {
  id               String  @id @default(cuid())
  firstName        String  @default("")
  lastName         String  @default("")
  avatar_filesize  Int?
  avatar_extension String?
  avatar_width     Int?
  avatar_height    Int?
  avatar_id        String?
  phoneNumber      String  @default("")
  ratings          String? @default("{}")
  user             User?   @relation("Seller_user", fields: [userId], references: [id])
  userId           String? @unique @map("user")
  ads              Ad[]    @relation("Ad_seller")
}

model Image {
  id             String  @id @default(cuid())
  file_filesize  Int?
  file_extension String?
  file_width     Int?
  file_height    Int?
  file_id        String?
  ad             Ad?     @relation("Image_ad", fields: [adId], references: [id])
  adId           String? @map("ad")

  @@index([adId])
}
